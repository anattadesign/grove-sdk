{"ast":null,"code":"import React,{useState,useEffect}from'react';import cartService from'../services/cartService';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CartDrawer=_ref=>{let{isOpen,closeDrawer}=_ref;const[cart,setCart]=useState({items:[],total_price:0});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{if(isOpen){fetchCart();}},[isOpen]);const fetchCart=async()=>{setLoading(true);try{const cartData=await cartService.getCart();setCart(cartData);}catch(error){setError('Failed to load cart. Please try again later.');}finally{setLoading(false);}};const removeItem=async line=>{try{await cartService.removeItem(line);fetchCart();}catch(error){setError('Failed to remove item. Please try again later.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-50 flex justify-end \".concat(isOpen?'block':'hidden'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-900 bg-opacity-50 w-full h-full\",onClick:closeDrawer}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white w-80 h-full shadow-lg p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-4\",children:\"Your Cart\"}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500\",children:error}),cart.items.length===0&&/*#__PURE__*/_jsx(\"div\",{children:\"Your cart is empty\"}),/*#__PURE__*/_jsx(\"ul\",{children:cart.items.map((item,index)=>/*#__PURE__*/_jsxs(\"li\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[item.title,\" - \",item.quantity,\" x $\",(item.price/100).toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removeItem(index+1),className:\"bg-red-500 text-white px-4 py-2 rounded\",children:\"Remove\"})]},item.id))}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: $\",(cart.total_price/100).toFixed(2)]})]})]});};export default CartDrawer;","map":{"version":3,"names":["React","useState","useEffect","cartService","jsx","_jsx","jsxs","_jsxs","CartDrawer","_ref","isOpen","closeDrawer","cart","setCart","items","total_price","loading","setLoading","error","setError","fetchCart","cartData","getCart","removeItem","line","className","concat","children","onClick","length","map","item","index","title","quantity","price","toFixed","id"],"sources":["/Users/unscripter/workspace/projects/grove-co/grove-skd/src/components/CartDrawer.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport cartService from '../services/cartService';\n\nconst CartDrawer = ({ isOpen, closeDrawer }) => {\n  const [cart, setCart] = useState({ items: [], total_price: 0 });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (isOpen) {\n      fetchCart();\n    }\n  }, [isOpen]);\n\n  const fetchCart = async () => {\n    setLoading(true);\n    try {\n      const cartData = await cartService.getCart();\n      setCart(cartData);\n    } catch (error) {\n      setError('Failed to load cart. Please try again later.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const removeItem = async (line) => {\n    try {\n      await cartService.removeItem(line);\n      fetchCart();\n    } catch (error) {\n      setError('Failed to remove item. Please try again later.');\n    }\n  };\n\n  return (\n    <div className={`fixed inset-0 z-50 flex justify-end ${isOpen ? 'block' : 'hidden'}`}>\n      <div className=\"bg-gray-900 bg-opacity-50 w-full h-full\" onClick={closeDrawer}></div>\n      <div className=\"bg-white w-80 h-full shadow-lg p-4\">\n        <h2 className=\"text-xl font-bold mb-4\">Your Cart</h2>\n        {loading && <div>Loading...</div>}\n        {error && <div className=\"text-red-500\">{error}</div>}\n        {cart.items.length === 0 && <div>Your cart is empty</div>}\n        <ul>\n          {cart.items.map((item, index) => (\n            <li key={item.id} className=\"flex justify-between items-center mb-4\">\n              <div>\n                {item.title} - {item.quantity} x ${(item.price / 100).toFixed(2)}\n              </div>\n              <button onClick={() => removeItem(index + 1)} className=\"bg-red-500 text-white px-4 py-2 rounded\">Remove</button>\n            </li>\n          ))}\n        </ul>\n        <p>Total: ${(cart.total_price / 100).toFixed(2)}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default CartDrawer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}